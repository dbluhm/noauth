{% extends 'public.html' %}

{% block title %}User Info{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', path='/user_info.css') }}">
<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
{% endblock %}

{% block content %}
<div class="form-container">
    <h2>User Information</h2>
    <p>Please fill out the form below to populate the ID Token.</p>
    <div class="warning">
      <i class="fa-solid fa-circle-exclamation"></i>
      This is for demonstration purposes only.
      <br />
      Never use this service in production.
    </div>
    <form action="{{ url_for('submit_and_redirect', id=id) }}" method="POST"
      x-data="{
        given_name: '{{ default.given_name }}',
        family_name: '{{ default.family_name }}',
        email: '{{ default.email }}',
        preferred_username: '{{ default.preferred_username }}',
        roles: '{{ default.roles }}'
      }"
      >
        <div class="form-group">
            <label for="given-name">Given Name</label>
            <input
              type="text"
              id="given-name"
              name="given_name"
              x-model="given_name"
              placeholder="Enter your given name"
              required
              >
        </div>
        <div class="form-group">
            <label for="family-name">Family Name</label>
            <input
              type="text"
              id="family-name"
              name="family_name"
              x-model="family_name"
              placeholder="Enter your family name"
              required
              >
        </div>
        <div class="form-group">
            <label for="email">Email</label>
            <input
              type="email"
              id="email"
              name="email"
              x-model="email"
              placeholder="Enter your email"
              required
              >
        </div>
        <div class="form-group">
            <label for="username">Preferred Username</label>
            <input
              type="text"
              id="username"
              name="preferred_username"
              x-model="preferred_username"
              placeholder="Enter your preferred username"
              required
              >
        </div>
        <div class="form-group">
            <label for="roles">Roles</label>
            <input
              type="text"
              id="roles"
              name="roles"
              x-model="roles"
              placeholder="Enter your roles (space separated)"
              required
              >
        </div>
        <div class="form-group controls">
          <button type="submit" class="btn-submit">Submit</button>
          <button type="button" class="btn-cancel"
            @click="
              given_name = '';
              family_name = '';
              email = '';
              preferred_username = '';
              roles = '';
            ">Clear</button>
        </div>
    </form>
</div>
{% endblock %}
